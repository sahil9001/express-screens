<html lang="en-US">
             <head>
               <title></title>
               <script type="module">const assets = JSON.parse('[{"link":"/content/screens/assets/media_118cffddf8cdfdba99057108f21e914a5c116e94c.jpeg","startTime":"12:05:00 AM","endTime":"11:55:00 PM","launchStartDate":"12/03/2023","launchEndDate":"15/06/2023","type":"image","isGMT":false},{"link":"/content/screens/media_17f00c9733e34483cf846e6900f1d4cb2c3aa9129.m4v","startTime":"12:05:00 AM","endTime":"11:55:00 PM","launchStartDate":"12/03/2023","launchEndDate":"15/06/2023","type":"video","isGMT":false},{"link":"/content/screens/assets/media_197a583acc36c5c412170ef0edb1ff648a9d8f568.png","startTime":"12:05:00 AM","endTime":"11:55:00 PM","launchStartDate":"12/03/2023","launchEndDate":"15/06/2023","type":"image","isGMT":false},{"link":"/content/screens/assets/media_1bb33cd658378ab372eca9278f10ce4a7d5ad624e.jpeg","startTime":"12:05:00 AM","endTime":"11:55:00 PM","launchStartDate":"12/03/2023","launchEndDate":"15/06/2023","type":"image","isGMT":false},{"link":"/content/screens/media_1d48fa6605d78fe5e354a4e05a4d81e77c1093a9a.m4v","startTime":"12:05:00 AM","endTime":"11:55:00 PM","launchStartDate":"12/03/2023","launchEndDate":"15/06/2023","type":"video","isGMT":false},{"link":"/content/screens/assets/media_11755f85cd753a2ebe6277773a03dee6304381755.jpeg","startTime":"12:05:00 AM","endTime":"11:55:00 PM","launchStartDate":"12/03/2023","launchEndDate":"15/06/2023","type":"image","isGMT":false},{"link":"/content/screens/media_15d560c1ffb1dd8d36835d7b6287403a10e474bc8.m4v","startTime":"12:05:00 AM","endTime":"11:55:00 PM","launchStartDate":"12/03/2023","launchEndDate":"15/06/2023","type":"video","isGMT":false}]');
  let currentIndex = 0;
  const parseDateString = (dateString, isGMT) => {
    const dateParts = dateString.split('/');
    const day = parseInt(dateParts[0], 10);
    const month = parseInt(dateParts[1], 10) - 1;
    const year = parseInt(dateParts[2], 10);
    if (isGMT) {
      return new Date(Date.UTC(year, month, day));
    }
    return new Date(year, month, day);
  };

  const parseTimeString = (timeString, isGMT) => {
    const parts = timeString.split(':');
    let hours = parseInt(parts[0], 10);
    const minutes = parseInt(parts[1], 10);
    const seconds = parseInt(parts[2].split(' ')[0], 10);
    const isPM = (timeString.indexOf('PM') > -1);
    if (isPM && hours < 12) {
      hours += 12;
    }
    if (!isPM && hours === 12) {
      hours -= 12;
    }
    const dateObj = new Date();
    if (isGMT) {
      dateObj.setUTCHours(hours);
      dateObj.setUTCMinutes(minutes);
      dateObj.setUTCSeconds(seconds);
    } else {
      dateObj.setHours(hours);
      dateObj.setMinutes(minutes);
      dateObj.setSeconds(seconds);
    }
    return dateObj;
  };

  const parseStartDateString = (dateString, isGMT) => {
    if (!dateString) {
      return new Date();
    }
    return parseDateString(dateString, isGMT);
  };

  const parseEndDateString = (dateString, isGMT) => {
    if (!dateString) {
      const date = new Date();
      date.setFullYear(date.getFullYear() + 10);
      return date;
    }
    return parseDateString(dateString, isGMT);
  };

  const parseStartTimeString = (timeString, isGMT) => {
    if (!timeString) {
      return new Date();
    }
    return parseTimeString(timeString, isGMT);
  };

  const parseEndTimeString = (timeString, isGMT) => {
    if (!timeString) {
      const date = new Date();
      date.setFullYear(date.getFullYear() + 10);
      return date;
    }
    return parseTimeString(timeString, isGMT);
  };

  const checkForPlayableAssets = async (assetsArray = []) => {
    if (assetsArray.length === 0) {
      return;
    }
    let isActive = false;
    assetsArray.forEach((asset) => {
      const launchStartDate = parseStartDateString(asset.launchStartDate, asset.isGMT);
      const launchEndDate = parseEndDateString(asset.launchEndDate, asset.isGMT);
      const startTime = parseStartTimeString(asset.startTime, asset.isGMT);
      const endTime = parseEndTimeString(asset.endTime, asset.isGMT);
      const now = new Date();
      if (now >= launchStartDate && now <= launchEndDate
        && now >= startTime && now <= endTime) {
        isActive = true;
      }
    });
    if (!isActive) {
      await new Promise((r) => { setTimeout(r, 5000); });
      await checkForPlayableAssets(assetsArray);
    }
  };

  const incrementAdIndex = () => {
    currentIndex = (currentIndex + 1) % assets.length;
  };

  async function playAds() {
    const container = document.getElementById('carousel-container');
    await checkForPlayableAssets(assets);
    while (currentIndex < assets.length) {
      const asset = assets[currentIndex];
      const launchStartDate = parseStartDateString(asset.launchStartDate, asset.isGMT);
      const launchEndDate = parseEndDateString(asset.launchEndDate, asset.isGMT);
      const startTime = parseStartTimeString(asset.startTime, asset.isGMT);
      const endTime = parseEndTimeString(asset.endTime, asset.isGMT);
      const now = new Date();
      if (now >= launchStartDate && now <= launchEndDate
        && now >= startTime && now <= endTime) {
        if (asset.type === 'image') {
          const img = new Image();
          img.src = asset.link;
          img.onerror = () => {
            incrementAdIndex();
            playAds();
          };
          img.onload = () => {
            container.innerHTML = '';
            container.appendChild(img);
            setTimeout(() => {
              img.classList.add('visible');
              setTimeout(() => {
                img.classList.remove('visible');
                container.removeChild(img);
                incrementAdIndex();
                playAds();
              }, 5000);
            }, 10);
          };
          break;
        } else if (asset.type === 'video') {
          const video = document.createElement('video');
          video.src = asset.link;
          video.onerror = () => {
            incrementAdIndex();
            playAds();
          };
          video.onended = () => {
            video.classList.remove('visible');
            setTimeout(() => {
              container.removeChild(video);
              incrementAdIndex();
              playAds();
            }, 10);
          };
          video.oncanplay = () => {
            container.innerHTML = '';
            container.appendChild(video);
            video.play();
            setTimeout(() => {
              video.classList.add('visible');
            }, 10);
          };
          video.muted = true;
          video.playsInline = true;
          break;
        }
      } else {
        incrementAdIndex();
      }
    }
  }
  playAds();
</script>
               <style>body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
}

#carousel-container {
    /* position: relative; */
    height: 100%;
    width: 100%;
    background-color: black;
}

img, video {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    margin: auto;
    opacity: 0;
    transition: opacity 1s;
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    width: 100%;
    height: 100%;
}

.visible {
    opacity: 1;
}
</style>
             </head>
             <body>
               <div id="carousel-container"></div>
             </body>
           </html>